---
# This playbook contains common plays that will be run on all nodes.
- include_vars: /cfg/cnm_vars.yml
  tags: base

# Add specified repository into sources list.
- name: Se asigna repositorio
  apt_repository: repo="{{ cnm_apt_repo }}" state=present
  tags: base
  
- name: Install packages
  apt:
    name: ['acpi', 'acpid', 'adduser', 'ant', 'apache2', 'apt-utils', 'aptitude', 'arping', 'at', 'autoconf', 'automake1.11', 'autotools-dev', 'bind9-host', 'binutils', 'binutils-dev', 'bsdmainutils', 'bsdutils', 'build-essential', 'busybox', 'bzip2', 'ca-certificates', 'comerr-dev', 'console-common', 'console-data', 'coreutils', 'cpio', 'cpp', 'cron', 'curl', 'curlftpfs', 'dc', 'debconf', 'debconf-i18n', 'debian-archive-keyring', 'debianutils', 'isc-dhcp-client', 'isc-dhcp-common', 'dictionaries-common', 'dmidecode', 'dnsutils', 'doc-debian', 'dpkg', 'dpkg-dev', 'dselect', 'e2fslibs', 'e2fsprogs','ed', 'eject', 'exim4', 'exim4-base', 'exim4-config', 'exim4-daemon-light', 'expect', 'fastjar', 'file', 'findutils', 'finger', 'fontconfig-config', 'ftp', 'g++', 'gcc',  'gettext-base', 'gnupg', 'gpgv', 'grep', 'groff-base', 'grub-legacy', 'gzip', 'hostname', 'iamerican', 'ibritish', 'ifupdown','imagemagick', 'info', 'initramfs-tools', 'initscripts', 'installation-report', 'iptables', 'iputils-ping', 'ispell', 'java-common',  'klibc-utils', 'laptop-detect', 'ldap-utils', 'less', 'libacl1', 'libapache2-mod-perl2', 'libapr1', 'libapr1-dev', 'libaprutil1','libaprutil1-dev', 'libart-2.0-2', 'libasound2', 'libattr1', 'libbcel-java', 'libbind9-161', 'libblkid1', 'libbz2-1.0', 'libc6', 'libc6-dev', 'libcap2', 'libcomerr2', 'libcommons-beanutils-java', 'libcommons-collections4-java', 'libcommons-dbcp-java', 'libcommons-digester-java', 'libcommons-el-java', 'libcommons-logging-java', 'libcommons-pool-java', 'libcups2', 'libcurl4', 'libcurl4-openssl-dev', 'libcurl3-gnutls', 'libdb5.3', 'libdb5.3-dev', 'libdbd-mysql-perl', 'libdbi-perl', 'libdevel-symdump-perl', 'libdevmapper1.02.1', 'libedit2','libevent-2.1-7', 'libexpat1', 'libexpat1-dev', 'libfontconfig1', 'libfreetype6', 'libfuse2', 'libgcc1',  'libgcrypt20', 'libgdbm6', 'libglib2.0-0', 'libgpg-error0', 'libhtml-parser-perl', 'libhtml-tagset-perl', 'libhtml-tree-perl', 'libice6', 'libidn11', 'libidn11-dev', 'libiodbc2',  'libisccc161', 'libisccfg163', 'libjaxp1.3-java', 'libjpeg62-turbo',  'libklibc', 'libkrb5-dev', 'libkrb5-3', 'liblcms2-2', 'libldap-2.4-2', 'libldap2-dev', 'liblocale-gettext-perl', 'liblockfile1', 'liblog4j1.2-java','libltdl7', 'liblwres161', 'liblzo2-2', 'libmagic1', 'default-libmysqlclient-dev', 'libncurses5', 'libncursesw5', 'libneon27', 'libnet-daemon-perl', 'libnet1', 'libnewt0.52', 'libnfsidmap2', 'libnss-ldap', 'libpam-ldap', 'libpam-modules', 'libpam-runtime', 'libpam0g', 'libpcap0.8','libpci3', 'libpcre3', 'libpcre3-dev', 'libperl5.32', 'libprpc-perl', 'libpng16-16', 'libpopt0', 'libpq-dev', 'libpq5', 'libreadline8', 'libregexp-java', 'librrd8', 'librrds-perl', 'libsasl2-2', 'libsasl2-modules', 'libselinux1', 'libsemanage1', 'libsensors5','libsensors4-dev', 'libsepol1', 'libservlet3.1-java', 'libsigc++-2.0-0v5', 'libslang2', 'libsm6', 'libsqlite3-0', 'libsqlite3-dev', 'libss2', 'libssl-dev', 'libssl1.1', 'libstdc++6', 'libstdc++-10-dev', 'libsvn1', 'libsysfs2', 'libtasn1-bin', 'libtasn1-6', 'libtext-charwidth-perl', 'libtext-iconv-perl', 'libtext-wrapi18n-perl', 'libtiff5', 'libtomcat9-java', 'libtool', 'liburi-perl', 'libusb-0.1-4', 'libuuid1', 'libwrap0', 'libwrap0-dev', 'libwww-perl', 'libx11-6', 'libx11-data', 'libxau6', 'libxdmcp6', 'libxerces2-java', 'libxext6', 'libxml2', 'libxpm4', 'libxt6', 'locales', 'login','logrotate', 'lsb-base', 'lsof', 'm4', 'make', 'makedev', 'man-db', 'manpages', 'mawk', 'mime-support', 'mount', 'mpack', 'mtools', 'mtr-tiny', 'mutt', 'default-mysql-client', 'mysql-common', 'default-mysql-server', 'nano', 'ncurses-base', 'ncurses-bin', 'ncurses-term', 'net-tools', 'netbase', 'netcat', 'nfs-common', 'nmap', 'nscd', 'ntpdate', 'odbcinst1debian2', 'openbsd-inetd', 'openssh-client', 'openssh-server', 'openssl',  'passwd', 'patch', 'pciutils', 'perl', 'perl-base', 'perl-modules', 'perl-doc', 'pkg-config', 'policycoreutils', 'rpcbind', 'procmail', 'procps', 'psmisc', 'python', 'python3', 'python3-minimal', 'readline-common', 'reportbug', 'rng-tools', 'rrdtool', 'samba',  'samba-common', 'sed', 'sharutils', 'shtool', 'slapd', 'smbclient', 'strace', 'subversion', 'sudo', 'syslog-ng', 'sysstat', 'sysv-rc','sysvinit-core', 'sysvinit-utils', 'tar', 'tasksel', 'tasksel-data', 'tcl8.6', 'tcpd', 'tcpdump', 'tcsh', 'telnet', 'texinfo', 'time', 'tofrodos', 'traceroute', 'tzdata', 'ucf', 'udev', 'unixodbc', 'unzip', 'update-inetd', 'usbutils', 'util-linux', 'uuid-dev', 'vim', 'vim-common', 'vim-runtime', 'vim-tiny', 'w3m', 'wamerican', 'wget', 'whiptail', 'whois', 'x11-common', 'zip', 'zlib1g', 'zlib1g-dev', 're2c', 'libevent-dev', 'minicom', 'liboping-dev', 'liboping0', 'setserial', 'libxml2-dev', 'chrpath', 'libgmp3-dev', 'syslog-ng', 'ssl-cert', 'openvpn', 'git', 'iotop', 'uuid', 'ipmitool', 'libpcap0.8-dev', 'freeipmi-common', 'freeipmi-tools', 'ipmitool', 'libfreeipmi17', 'libipmiconsole2', 'libipmidetect0', 'libipmimonitoring6', 'sblim-wbemcli', 'bmon', 'ethtool', 'postgresql-client','libsmbclient-dev', 'libperl-dev'  ]
    state: present
    force: yes
  become: true
  tags: base

- name: Install PERL modules
  shell: /opt/cnm/crawler/bin/support/chk-perl > /tmp/chk-perl.out 2>&1
  tags: base

...
